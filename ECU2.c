#include<lpc214x.h>
//the serial data and the serial clock will be used in here in interfacing the circuit SDA and SCL
//the I2C0 AND THE I2C1  IS BEING USED IN HERE FOR THE APPLICATION PLATFORM IN THE CHIP FOR THE 
void I2CINIT(void)
{
	PINSEL0 = PINSEL0 | 0X00000050; //P0.2 AND P0.3 AS THE SCL0 AND SDA0
	I2C0CONSET = 0X40;//ENABLE THE 
	I2C0SCLL = 0X32;//THE I2C DATA RATE AT THE 300KHZ AT THE 50% DUTY CYCLE
	I2C0SCLH = 0X32;
}
void I2C_START(void)
{
	I2C0CONSET = 0X20;//SET THE START BIT FOR THE START CONDITION
	while((I2C0CONSET & 0X08)== 0);
	I2C0CONCLR = 0X28;
}
void I2C_WRITE(char DATA)
{
	I2C0DAT = DATA;
	I2C0CONSET = 0X40;
	while((I2C0CONSET & 0X08) == 0);
	I2C0CONCLR = 0X08;
}
unsigned char I2C_READ_ACK(void) //THE ACKNOLEDGMENT OF THE DATA IN THE REAL TIME REGISTER ALLOCATION IS DONE IN HERE
{
	I2C0CONSET = 0X44;//ENABLE THE I2C CONFIGURE SET REGISTER WITH ACKNOWLEDGMENT
	while((I2C0CONSET & 0X08) == 0);
	I2C0CONCLR = 0X0C;
	return I2C0DAT;
}
unsigned char I2C_READ_NACK(void) //NO ACKNOWLEDMENT OF THE CONFIGURE SET TIMER
{
	I2C0CONSET = 0X40;
	while(( I2C0CONSET & 0X08) == 0);
	I2C0CONCLR = 0X08;
	return I2C0DAT;
}
void I2C_STOP(void)
{
	I2C0CONSET = 0X50;
}
void I2C_MULTIREAD(char* arr ,int bytes)
{
	unsigned int i = 0;
	while((bytes - 1) != 0)
	{
		I2C0CONSET = 0X44;
		while(( I2C0CONSET & 0X08) == 0);
		I2C0CONCLR = 0X0C;
		*( arr + i ) = I2C0DAT;
		bytes-- ;
		i++;
	}
	I2C0CONSET = 0X40;
	while(( I2C0CONSET * 0X08) == 0);
	I2C0CONCLR = 0X08;
	*( arr + i) = I2C0DAT;
}